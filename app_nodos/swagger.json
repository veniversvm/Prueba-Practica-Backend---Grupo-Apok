{
    "openapi": "3.0.3",
    "info": {
        "title": "Tree Management API",
        "version": "1.0.0",
        "description": "API para gestionar árboles de nodos con soporte multi-idioma"
    },
    "paths": {
        "/api/nodes/": {
            "get": {
                "operationId": "nodes_list",
                "description": "Lista los nodos raíz.\nEl resultado es cacheado por 180 segundos y versionado.",
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Node"
                                    }
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "post": {
                "operationId": "nodes_create",
                "description": "ViewSet para la gestión jerárquica de nodos.\n\nCaracterísticas:\n- Soft delete\n- Permisos personalizados\n- Cache del listado con invalidación por versión",
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "201": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/nodes/{id}/": {
            "get": {
                "operationId": "nodes_retrieve",
                "description": "ViewSet para la gestión jerárquica de nodos.\n\nCaracterísticas:\n- Soft delete\n- Permisos personalizados\n- Cache del listado con invalidación por versión",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "put": {
                "operationId": "nodes_update",
                "description": "ViewSet para la gestión jerárquica de nodos.\n\nCaracterísticas:\n- Soft delete\n- Permisos personalizados\n- Cache del listado con invalidación por versión",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "patch": {
                "operationId": "nodes_partial_update",
                "description": "ViewSet para la gestión jerárquica de nodos.\n\nCaracterísticas:\n- Soft delete\n- Permisos personalizados\n- Cache del listado con invalidación por versión",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "delete": {
                "operationId": "nodes_destroy",
                "description": "Borrado lógico de un nodo hoja.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No response body"
                    }
                }
            }
        },
        "/api/token/": {
            "post": {
                "operationId": "token_create",
                "description": "Takes a set of user credentials and returns an access and refresh JSON web\ntoken pair to prove the authentication of those credentials.",
                "tags": [
                    "token"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TokenObtainPair"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/token/refresh/": {
            "post": {
                "operationId": "token_refresh_create",
                "description": "Takes a refresh type JSON web token and returns an access type JSON web\ntoken if the refresh token is valid.",
                "tags": [
                    "token"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TokenRefresh"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/": {
            "get": {
                "operationId": "users_list",
                "description": "ViewSet para la gestión completa de usuarios.\n\nImplementa control de acceso basado en roles (SUDO, ADMIN, USER) para CRUD,\nvalidaciones estrictas de creación/actualización de roles,\ny endpoints custom para auditoría de nodos y gestión de perfil.",
                "parameters": [
                    {
                        "in": "query",
                        "name": "is_active",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "in": "query",
                        "name": "is_email_confirmed",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "ordering",
                        "required": false,
                        "in": "query",
                        "description": "Which field to use when ordering the results.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ADMIN",
                                "SUDO",
                                "USER"
                            ]
                        },
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    {
                        "name": "search",
                        "required": false,
                        "in": "query",
                        "description": "A search term.",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/User"
                                    }
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "post": {
                "operationId": "users_create",
                "description": "Crea un nuevo usuario, validando que solo SUDO pueda crear un SUDO.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "201": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserCreate"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/{id}/": {
            "get": {
                "operationId": "users_retrieve",
                "description": "ViewSet para la gestión completa de usuarios.\n\nImplementa control de acceso basado en roles (SUDO, ADMIN, USER) para CRUD,\nvalidaciones estrictas de creación/actualización de roles,\ny endpoints custom para auditoría de nodos y gestión de perfil.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserDetail"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "put": {
                "operationId": "users_update",
                "description": "Valida que los usuarios no puedan escalar privilegios o ser editados por usuarios inferiores.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "patch": {
                "operationId": "users_partial_update",
                "description": "ViewSet para la gestión completa de usuarios.\n\nImplementa control de acceso basado en roles (SUDO, ADMIN, USER) para CRUD,\nvalidaciones estrictas de creación/actualización de roles,\ny endpoints custom para auditoría de nodos y gestión de perfil.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "delete": {
                "operationId": "users_destroy",
                "description": "Implementación de Borrado Lógico (Soft Delete) y validación de permisos.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No response body"
                    }
                }
            }
        },
        "/api/users/{id}/nodes-created/": {
            "get": {
                "operationId": "users_nodes_created_retrieve",
                "description": "Endpoint custom para listar los nodos CREADOS por un usuario específico.\nPermite a ADMIN/SUDO ver todos; USER solo puede ver los suyos.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/me/": {
            "get": {
                "operationId": "users_me_retrieve",
                "description": "Endpoint para recuperar el perfil del usuario autenticado (GET /me).",
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/me/change-password/": {
            "post": {
                "operationId": "users_me_change_password_create",
                "description": "Endpoint para que el usuario actual cambie su propia contraseña.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/me/update/": {
            "put": {
                "operationId": "users_me_update_update",
                "description": "Endpoint para actualizar el perfil del usuario autenticado.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "patch": {
                "operationId": "users_me_update_partial_update",
                "description": "Endpoint para actualizar el perfil del usuario autenticado.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Node": {
                "type": "object",
                "description": "Serializador para el modelo Node.\n\nGestiona la transformación del 'title' (número a palabra) y\nla representación jerárquica con profundidad dinámica.\nTambién implementa la lógica de auditoría y localización de fechas.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "title": {
                        "type": "string",
                        "description": "Título del nodo. Puede ser la representación textual de un número.",
                        "maxLength": 255
                    },
                    "parent": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Nodo padre. Null si es un nodo raíz."
                    },
                    "children": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Lista de nodos hijos (recursividad limitada por depth)."
                    },
                    "created_at": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Fecha de creación ajustada a la zona horaria del cliente."
                    },
                    "created_by_name": {
                        "type": "string",
                        "description": "Nombre del usuario que creó el nodo.",
                        "readOnly": true
                    },
                    "updated_by_name": {
                        "type": "string",
                        "description": "Nombre del usuario que modificó por última vez el nodo.",
                        "readOnly": true
                    }
                },
                "required": [
                    "children",
                    "created_at",
                    "created_by_name",
                    "id",
                    "title",
                    "updated_by_name"
                ]
            },
            "PatchedNode": {
                "type": "object",
                "description": "Serializador para el modelo Node.\n\nGestiona la transformación del 'title' (número a palabra) y\nla representación jerárquica con profundidad dinámica.\nTambién implementa la lógica de auditoría y localización de fechas.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "title": {
                        "type": "string",
                        "description": "Título del nodo. Puede ser la representación textual de un número.",
                        "maxLength": 255
                    },
                    "parent": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Nodo padre. Null si es un nodo raíz."
                    },
                    "children": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Lista de nodos hijos (recursividad limitada por depth)."
                    },
                    "created_at": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Fecha de creación ajustada a la zona horaria del cliente."
                    },
                    "created_by_name": {
                        "type": "string",
                        "description": "Nombre del usuario que creó el nodo.",
                        "readOnly": true
                    },
                    "updated_by_name": {
                        "type": "string",
                        "description": "Nombre del usuario que modificó por última vez el nodo.",
                        "readOnly": true
                    }
                }
            },
            "PatchedUser": {
                "type": "object",
                "description": "Serializer base para operaciones generales de lectura/actualización de usuarios.\n\nCampos clave:\n- 'password': WRITE_ONLY, requerido solo en creación/actualización de contraseña.\n- Campos de auditoría de nodos ('nodes_created_count' en DetailSerializer)\n  se exponen como READ_ONLY.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Contraseña. Se ignora en el listado, requerida en el POST/PUT."
                    }
                }
            },
            "RoleEnum": {
                "enum": [
                    "SUDO",
                    "ADMIN",
                    "USER"
                ],
                "type": "string",
                "description": "* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
            },
            "TokenObtainPair": {
                "type": "object",
                "properties": {
                    "username": {
                        "type": "string",
                        "writeOnly": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true
                    },
                    "access": {
                        "type": "string",
                        "readOnly": true
                    },
                    "refresh": {
                        "type": "string",
                        "readOnly": true
                    }
                },
                "required": [
                    "access",
                    "password",
                    "refresh",
                    "username"
                ]
            },
            "TokenRefresh": {
                "type": "object",
                "properties": {
                    "access": {
                        "type": "string",
                        "readOnly": true
                    },
                    "refresh": {
                        "type": "string",
                        "writeOnly": true
                    }
                },
                "required": [
                    "access",
                    "refresh"
                ]
            },
            "User": {
                "type": "object",
                "description": "Serializer base para operaciones generales de lectura/actualización de usuarios.\n\nCampos clave:\n- 'password': WRITE_ONLY, requerido solo en creación/actualización de contraseña.\n- Campos de auditoría de nodos ('nodes_created_count' en DetailSerializer)\n  se exponen como READ_ONLY.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Contraseña. Se ignora en el listado, requerida en el POST/PUT."
                    }
                },
                "required": [
                    "date_joined",
                    "email",
                    "id",
                    "is_staff",
                    "is_superuser",
                    "last_login",
                    "username"
                ]
            },
            "UserCreate": {
                "type": "object",
                "description": "Serializer específico para el registro de nuevos usuarios (POST /users/).\nAplica validaciones estrictas de contraseña y rol durante la creación.",
                "properties": {
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Contraseña mínima de 8 caracteres.",
                        "minLength": 8
                    },
                    "password_confirm": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Confirmación de la contraseña."
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    }
                },
                "required": [
                    "email",
                    "password",
                    "password_confirm",
                    "username"
                ]
            },
            "UserDetail": {
                "type": "object",
                "description": "Serializer específico para la vista de detalle de usuario.\nExpone métricas de auditoría de nodos creados.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Contraseña. Se ignora en el listado, requerida en el POST/PUT."
                    },
                    "nodes_created_count": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Número total de nodos activos creados por este usuario."
                    }
                },
                "required": [
                    "date_joined",
                    "email",
                    "id",
                    "is_staff",
                    "is_superuser",
                    "last_login",
                    "nodes_created_count",
                    "username"
                ]
            }
        },
        "securitySchemes": {
            "jwtAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}