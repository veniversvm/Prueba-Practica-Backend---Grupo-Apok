{
    "openapi": "3.0.3",
    "info": {
        "title": "Tree Management API",
        "version": "1.0.0",
        "description": "API para gestionar árboles de nodos con soporte multi-idioma"
    },
    "paths": {
        "/api/nodes/": {
            "get": {
                "operationId": "nodes_list",
                "description": "\nObtiene todos los nodos raíz del árbol jerárquico.\n\n**Características:**\n- Parámetro `depth` controla la profundidad (default: solo hijos directos)\n- Header `Accept-Language` define el idioma para el campo `title`\n- Header `Time-Zone` ajusta la zona horaria de `created_at`\n- Cache automático de 180 segundos\n\n**Ejemplos de uso:**\n- `GET /api/nodes/` - Solo hijos directos (default)\n- `GET /api/nodes/?depth=2` - Hasta nietos\n- `GET /api/nodes/?depth=-1` - Profundidad infinita (limitada a 10 niveles)\n",
                "summary": "Listar nodos raíz",
                "parameters": [
                    {
                        "in": "query",
                        "name": "depth",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "\nNiveles de profundidad a mostrar:\n- `null` o no especificado: solo hijos directos (default)\n- `0`: sin hijos\n- `1`: hijos directos\n- `2`: hijos + nietos\n- `-1`: profundidad infinita (limitada a 10 niveles)\n",
                        "examples": {
                            "Default(sinParámetro)": {
                                "value": null,
                                "summary": "Default (sin parámetro)"
                            },
                            "Profundidad2Niveles": {
                                "value": 2,
                                "summary": "Profundidad 2 niveles"
                            },
                            "ProfundidadInfinita": {
                                "value": -1,
                                "summary": "Profundidad infinita"
                            }
                        }
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Node"
                                    }
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": [
                                            {
                                                "id": 1,
                                                "content": "Nodo raíz",
                                                "title": "one",
                                                "parent": null,
                                                "created_at": "2024-01-15 10:00:00",
                                                "children": [
                                                    {
                                                        "id": 2,
                                                        "content": "Hijo",
                                                        "title": "two",
                                                        "parent": 1,
                                                        "created_at": "2024-01-15 10:05:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ],
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": [
                                            {
                                                "id": 1,
                                                "content": "Nodo raíz",
                                                "title": "uno",
                                                "parent": null,
                                                "created_at": "2024-01-15 10:00:00",
                                                "children": [
                                                    {
                                                        "id": 2,
                                                        "content": "Hijo",
                                                        "title": "dos",
                                                        "parent": 1,
                                                        "created_at": "2024-01-15 10:05:00",
                                                        "children": [
                                                            {
                                                                "id": 3,
                                                                "content": "Nieto",
                                                                "title": "tres",
                                                                "parent": 2,
                                                                "created_at": "2024-01-15 10:07:00",
                                                                "children": []
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": [
                                            {
                                                "id": 4,
                                                "content": "Nodo hoja",
                                                "title": "four",
                                                "parent": 2,
                                                "created_at": "2024-01-15 10:08:00",
                                                "children": []
                                            }
                                        ],
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "401": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "No autenticado"
                    }
                }
            },
            "post": {
                "operationId": "nodes_create",
                "description": "\nCrea un nuevo nodo en el árbol.\n\n**Permisos requeridos:** Rol ADMIN o SUDO\n",
                "summary": "Crear nuevo nodo",
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            },
                            "examples": {
                                "EjemploDeNodoRaíz": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "one",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "two",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": []
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo raíz",
                                    "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                },
                                "EjemploDeNodoConProfundidad2": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "uno",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "dos",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": [
                                                    {
                                                        "id": 3,
                                                        "content": "Nieto",
                                                        "title": "tres",
                                                        "parent": 2,
                                                        "created_at": "2024-01-15 10:07:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo con profundidad 2",
                                    "description": "Ejemplo con depth=2 (hasta nietos)"
                                },
                                "EjemploDeNodoHoja": {
                                    "value": {
                                        "id": 4,
                                        "content": "Nodo hoja",
                                        "title": "four",
                                        "parent": 2,
                                        "created_at": "2024-01-15 10:08:00",
                                        "children": []
                                    },
                                    "summary": "Ejemplo de nodo hoja",
                                    "description": "Ejemplo de nodo sin hijos"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "201": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "\nErrores de validación:\n- Content duplicado en mismo nivel\n- Auto-referencia\n"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    }
                }
            }
        },
        "/api/nodes/{id}/": {
            "get": {
                "operationId": "nodes_retrieve",
                "description": "Obtiene un nodo específico con sus descendientes según profundidad.",
                "summary": "Obtener nodo específico",
                "parameters": [
                    {
                        "in": "header",
                        "name": "Accept-Language",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Idioma para el campo title (ej: es, en, fr)"
                    },
                    {
                        "in": "header",
                        "name": "Time-Zone",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Zona horaria para created_at (ej: UTC, America/New_York)"
                    },
                    {
                        "in": "query",
                        "name": "depth",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Niveles de profundidad a mostrar"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "\nErrores de validación:\n- ID debe ser ≥ 1\n- ID inválido (no numérico)\n"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            },
            "put": {
                "operationId": "nodes_update",
                "description": "Actualiza todos los campos de un nodo existente.",
                "summary": "Actualizar nodo completo",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            },
                            "examples": {
                                "EjemploDeNodoRaíz": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "one",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "two",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": []
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo raíz",
                                    "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                },
                                "EjemploDeNodoConProfundidad2": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "uno",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "dos",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": [
                                                    {
                                                        "id": 3,
                                                        "content": "Nieto",
                                                        "title": "tres",
                                                        "parent": 2,
                                                        "created_at": "2024-01-15 10:07:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo con profundidad 2",
                                    "description": "Ejemplo con depth=2 (hasta nietos)"
                                },
                                "EjemploDeNodoHoja": {
                                    "value": {
                                        "id": 4,
                                        "content": "Nodo hoja",
                                        "title": "four",
                                        "parent": 2,
                                        "created_at": "2024-01-15 10:08:00",
                                        "children": []
                                    },
                                    "summary": "Ejemplo de nodo hoja",
                                    "description": "Ejemplo de nodo sin hijos"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Error de validación"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            },
            "patch": {
                "operationId": "nodes_partial_update",
                "description": "Actualiza campos específicos de un nodo existente.",
                "summary": "Actualizar nodo parcialmente",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            },
                            "examples": {
                                "EjemploDeNodoRaíz": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "one",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "two",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": []
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo raíz",
                                    "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                },
                                "EjemploDeNodoConProfundidad2": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "uno",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "dos",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": [
                                                    {
                                                        "id": 3,
                                                        "content": "Nieto",
                                                        "title": "tres",
                                                        "parent": 2,
                                                        "created_at": "2024-01-15 10:07:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo con profundidad 2",
                                    "description": "Ejemplo con depth=2 (hasta nietos)"
                                },
                                "EjemploDeNodoHoja": {
                                    "value": {
                                        "id": 4,
                                        "content": "Nodo hoja",
                                        "title": "four",
                                        "parent": 2,
                                        "created_at": "2024-01-15 10:08:00",
                                        "children": []
                                    },
                                    "summary": "Ejemplo de nodo hoja",
                                    "description": "Ejemplo de nodo sin hijos"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Error de validación"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            },
            "delete": {
                "operationId": "nodes_destroy",
                "description": "\nElimina lógicamente un nodo.\n\n**Restricciones:**\n- No se puede eliminar nodos con hijos activos\n- Solo elimina nodos hoja\n- Es un borrado lógico (is_deleted=True)\n\n**Respuesta exitosa:** 200 OK con mensaje de confirmación\n**Error:** 400 Bad Request si tiene hijos activos\n",
                "summary": "Eliminar nodo (soft delete)",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                },
                                "examples": {
                                    "EjemploRespuesta": {
                                        "value": {
                                            "message": "Nodo 5 eliminado exitosamente.",
                                            "id": 5
                                        },
                                        "summary": "Ejemplo respuesta"
                                    }
                                }
                            }
                        },
                        "description": "Eliminación exitosa"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                },
                                "examples": {
                                    "Error:TieneHijos": {
                                        "value": {
                                            "error": "No se puede eliminar un nodo que tiene hijos activos.",
                                            "code": "has_children"
                                        },
                                        "summary": "Error: tiene hijos"
                                    }
                                }
                            }
                        },
                        "description": "\nErrores:\n- El nodo tiene hijos activos (code: has_children)\n- ID inválido (< 1 o no numérico)\n"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            }
        },
        "/api/nodes/{id}/descendants/": {
            "get": {
                "operationId": "nodes_descendants_retrieve",
                "description": "Obtiene todos los descendientes de un nodo específico.",
                "summary": "Obtener descendientes de un nodo",
                "parameters": [
                    {
                        "in": "query",
                        "name": "depth",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Niveles de profundidad a mostrar"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "ID inválido (< 1 o no numérico)"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            }
        },
        "/api/token/": {
            "post": {
                "operationId": "token_create",
                "description": "Takes a set of user credentials and returns an access and refresh JSON web\ntoken pair to prove the authentication of those credentials.",
                "tags": [
                    "token"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TokenObtainPair"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/token/refresh/": {
            "post": {
                "operationId": "token_refresh_create",
                "description": "Takes a refresh type JSON web token and returns an access type JSON web\ntoken if the refresh token is valid.",
                "tags": [
                    "token"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TokenRefresh"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/": {
            "get": {
                "operationId": "users_list",
                "description": "ViewSet para la gestión completa de usuarios.\n\nImplementa control de acceso basado en roles (SUDO, ADMIN, USER) para CRUD,\nvalidaciones estrictas de creación/actualización de roles,\ny endpoints custom para auditoría de nodos y gestión de perfil.",
                "parameters": [
                    {
                        "in": "query",
                        "name": "is_active",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "in": "query",
                        "name": "is_email_confirmed",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "ordering",
                        "required": false,
                        "in": "query",
                        "description": "Which field to use when ordering the results.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ADMIN",
                                "SUDO",
                                "USER"
                            ]
                        },
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    {
                        "name": "search",
                        "required": false,
                        "in": "query",
                        "description": "A search term.",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/User"
                                    }
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "post": {
                "operationId": "users_create",
                "description": "Crea un nuevo usuario, validando que solo SUDO pueda crear un SUDO.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "201": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserCreate"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/{id}/": {
            "get": {
                "operationId": "users_retrieve",
                "description": "ViewSet para la gestión completa de usuarios.\n\nImplementa control de acceso basado en roles (SUDO, ADMIN, USER) para CRUD,\nvalidaciones estrictas de creación/actualización de roles,\ny endpoints custom para auditoría de nodos y gestión de perfil.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserDetail"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "put": {
                "operationId": "users_update",
                "description": "Valida que los usuarios no puedan escalar privilegios o ser editados por usuarios inferiores.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "patch": {
                "operationId": "users_partial_update",
                "description": "ViewSet para la gestión completa de usuarios.\n\nImplementa control de acceso basado en roles (SUDO, ADMIN, USER) para CRUD,\nvalidaciones estrictas de creación/actualización de roles,\ny endpoints custom para auditoría de nodos y gestión de perfil.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "delete": {
                "operationId": "users_destroy",
                "description": "Implementación de Borrado Lógico (Soft Delete) y validación de permisos.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No response body"
                    }
                }
            }
        },
        "/api/users/{id}/nodes-created/": {
            "get": {
                "operationId": "users_nodes_created_retrieve",
                "description": "Endpoint custom para listar los nodos CREADOS por un usuario específico.\nPermite a ADMIN/SUDO ver todos; USER solo puede ver los suyos.",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/me/": {
            "get": {
                "operationId": "users_me_retrieve",
                "description": "Endpoint para recuperar el perfil del usuario autenticado (GET /me).",
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/me/change-password/": {
            "post": {
                "operationId": "users_me_change_password_create",
                "description": "Endpoint para que el usuario actual cambie su propia contraseña.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/me/update/": {
            "put": {
                "operationId": "users_me_update_update",
                "description": "Endpoint para actualizar el perfil del usuario autenticado.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            },
            "patch": {
                "operationId": "users_me_update_partial_update",
                "description": "Endpoint para actualizar el perfil del usuario autenticado.",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Node": {
                "type": "object",
                "description": "Serializador para el modelo Node con características avanzadas:\n\n**Campos calculados dinámicamente:**\n1. **title**: Representación textual del ID según idioma del header Accept-Language\n   - Ejemplo: ID=1 → \"one\" (en), \"uno\" (es), \"un\" (fr)\n   - Idiomas soportados: en, es, fr, de, it, pt, ru, ar\n   - Fallback a inglés si idioma no soportado\n\n2. **children**: Lista de hijos con control de profundidad recursiva\n   - Controlado por parámetro de query ?depth=N\n   - Lógica de profundidad:\n     - depth=None: solo hijos directos (default)\n     - depth=0: sin hijos\n     - depth=1: hijos directos (sin nietos)\n     - depth=2: hijos + nietos\n     - depth=-1: todos los niveles (limitado a 10 por seguridad)\n\n3. **created_at**: Fecha de creación en zona horaria personalizada\n   - Se ajusta según header Time-Zone\n   - Formato: \"YYYY-MM-DD HH:MM:SS\"\n   - Fallback a UTC si zona horaria inválida\n\n**Validaciones implementadas:**\n- Unicidad: No puede haber dos nodos con mismo content bajo mismo parent\n- Auto-referencia: Un nodo no puede ser su propio padre\n- ID validation: IDs deben ser ≥ 1 (solo lectura, generado automáticamente)",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "content": {
                        "type": "string",
                        "description": "Contenido o descripción del nodo.",
                        "maxLength": 255
                    },
                    "title": {
                        "type": "string",
                        "readOnly": true
                    },
                    "parent": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Nodo padre. Null si es un nodo raíz."
                    },
                    "children": {
                        "type": "string",
                        "readOnly": true
                    },
                    "created_at": {
                        "type": "string",
                        "readOnly": true
                    }
                },
                "required": [
                    "children",
                    "content",
                    "created_at",
                    "id",
                    "title"
                ]
            },
            "PatchedNode": {
                "type": "object",
                "description": "Serializador para el modelo Node con características avanzadas:\n\n**Campos calculados dinámicamente:**\n1. **title**: Representación textual del ID según idioma del header Accept-Language\n   - Ejemplo: ID=1 → \"one\" (en), \"uno\" (es), \"un\" (fr)\n   - Idiomas soportados: en, es, fr, de, it, pt, ru, ar\n   - Fallback a inglés si idioma no soportado\n\n2. **children**: Lista de hijos con control de profundidad recursiva\n   - Controlado por parámetro de query ?depth=N\n   - Lógica de profundidad:\n     - depth=None: solo hijos directos (default)\n     - depth=0: sin hijos\n     - depth=1: hijos directos (sin nietos)\n     - depth=2: hijos + nietos\n     - depth=-1: todos los niveles (limitado a 10 por seguridad)\n\n3. **created_at**: Fecha de creación en zona horaria personalizada\n   - Se ajusta según header Time-Zone\n   - Formato: \"YYYY-MM-DD HH:MM:SS\"\n   - Fallback a UTC si zona horaria inválida\n\n**Validaciones implementadas:**\n- Unicidad: No puede haber dos nodos con mismo content bajo mismo parent\n- Auto-referencia: Un nodo no puede ser su propio padre\n- ID validation: IDs deben ser ≥ 1 (solo lectura, generado automáticamente)",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "content": {
                        "type": "string",
                        "description": "Contenido o descripción del nodo.",
                        "maxLength": 255
                    },
                    "title": {
                        "type": "string",
                        "readOnly": true
                    },
                    "parent": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Nodo padre. Null si es un nodo raíz."
                    },
                    "children": {
                        "type": "string",
                        "readOnly": true
                    },
                    "created_at": {
                        "type": "string",
                        "readOnly": true
                    }
                }
            },
            "PatchedUser": {
                "type": "object",
                "description": "Serializer base para operaciones de lectura (GET) y actualización (PUT/PATCH).\n\nCaracterísticas:\n- Permite actualizaciones parciales sin exigir 'email' o 'username' obligatoriamente.\n- La contraseña es 'write_only' (nunca se lee, solo se escribe).\n- Incluye validaciones de unicidad personalizadas para permitir editar el propio perfil.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Dejar en blanco para mantener la contraseña actual."
                    }
                }
            },
            "RoleEnum": {
                "enum": [
                    "SUDO",
                    "ADMIN",
                    "USER"
                ],
                "type": "string",
                "description": "* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
            },
            "TokenObtainPair": {
                "type": "object",
                "properties": {
                    "username": {
                        "type": "string",
                        "writeOnly": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true
                    },
                    "access": {
                        "type": "string",
                        "readOnly": true
                    },
                    "refresh": {
                        "type": "string",
                        "readOnly": true
                    }
                },
                "required": [
                    "access",
                    "password",
                    "refresh",
                    "username"
                ]
            },
            "TokenRefresh": {
                "type": "object",
                "properties": {
                    "access": {
                        "type": "string",
                        "readOnly": true
                    },
                    "refresh": {
                        "type": "string",
                        "writeOnly": true
                    }
                },
                "required": [
                    "access",
                    "refresh"
                ]
            },
            "User": {
                "type": "object",
                "description": "Serializer base para operaciones de lectura (GET) y actualización (PUT/PATCH).\n\nCaracterísticas:\n- Permite actualizaciones parciales sin exigir 'email' o 'username' obligatoriamente.\n- La contraseña es 'write_only' (nunca se lee, solo se escribe).\n- Incluye validaciones de unicidad personalizadas para permitir editar el propio perfil.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Dejar en blanco para mantener la contraseña actual."
                    }
                },
                "required": [
                    "date_joined",
                    "id",
                    "is_staff",
                    "is_superuser",
                    "last_login"
                ]
            },
            "UserCreate": {
                "type": "object",
                "description": "Serializer exclusivo para la creación de nuevos usuarios (POST).\nDifiere del base en que aquí los campos principales SÍ son obligatorios.",
                "properties": {
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Contraseña obligatoria (mínimo 8 caracteres).",
                        "minLength": 8
                    },
                    "password_confirm": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Confirmación de la contraseña."
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    }
                },
                "required": [
                    "email",
                    "password",
                    "password_confirm",
                    "username"
                ]
            },
            "UserDetail": {
                "type": "object",
                "description": "Serializer extendido para la vista de detalle (GET /users/{id}/).\nIncluye métricas adicionales de auditoría (conteo de nodos).",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Dejar en blanco para mantener la contraseña actual."
                    },
                    "nodes_created_count": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Cantidad de nodos activos creados por este usuario."
                    }
                },
                "required": [
                    "date_joined",
                    "id",
                    "is_staff",
                    "is_superuser",
                    "last_login",
                    "nodes_created_count"
                ]
            }
        },
        "securitySchemes": {
            "jwtAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}