{
    "openapi": "3.0.3",
    "info": {
        "title": "Tree Management API",
        "version": "1.0.0",
        "description": "API para gestionar árboles de nodos con soporte multi-idioma"
    },
    "paths": {
        "/api/nodes/": {
            "get": {
                "operationId": "nodes_list",
                "description": "\nObtiene todos los nodos raíz del árbol jerárquico.\n\n**Características:**\n- Parámetro `depth` controla la profundidad (default: solo hijos directos)\n- Header `Accept-Language` define el idioma para el campo `title`\n- Header `Time-Zone` ajusta la zona horaria de `created_at`\n- Cache automático de 180 segundos\n\n**Ejemplos de uso:**\n- `GET /api/nodes/` - Solo hijos directos (default)\n- `GET /api/nodes/?depth=2` - Hasta nietos\n- `GET /api/nodes/?depth=-1` - Profundidad infinita (limitada a 10 niveles)\n",
                "summary": "Listar nodos raíz",
                "parameters": [
                    {
                        "in": "query",
                        "name": "depth",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "\nNiveles de profundidad a mostrar:\n- `null` o no especificado: solo hijos directos (default)\n- `0`: sin hijos\n- `1`: hijos directos\n- `2`: hijos + nietos\n- `-1`: profundidad infinita (limitada a 10 niveles)\n",
                        "examples": {
                            "Default(sinParámetro)": {
                                "value": null,
                                "summary": "Default (sin parámetro)"
                            },
                            "Profundidad2Niveles": {
                                "value": 2,
                                "summary": "Profundidad 2 niveles"
                            },
                            "ProfundidadInfinita": {
                                "value": -1,
                                "summary": "Profundidad infinita"
                            }
                        }
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Node"
                                    }
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": [
                                            {
                                                "id": 1,
                                                "content": "Nodo raíz",
                                                "title": "one",
                                                "parent": null,
                                                "created_at": "2024-01-15 10:00:00",
                                                "children": [
                                                    {
                                                        "id": 2,
                                                        "content": "Hijo",
                                                        "title": "two",
                                                        "parent": 1,
                                                        "created_at": "2024-01-15 10:05:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ],
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": [
                                            {
                                                "id": 1,
                                                "content": "Nodo raíz",
                                                "title": "uno",
                                                "parent": null,
                                                "created_at": "2024-01-15 10:00:00",
                                                "children": [
                                                    {
                                                        "id": 2,
                                                        "content": "Hijo",
                                                        "title": "dos",
                                                        "parent": 1,
                                                        "created_at": "2024-01-15 10:05:00",
                                                        "children": [
                                                            {
                                                                "id": 3,
                                                                "content": "Nieto",
                                                                "title": "tres",
                                                                "parent": 2,
                                                                "created_at": "2024-01-15 10:07:00",
                                                                "children": []
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ],
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": [
                                            {
                                                "id": 4,
                                                "content": "Nodo hoja",
                                                "title": "four",
                                                "parent": 2,
                                                "created_at": "2024-01-15 10:08:00",
                                                "children": []
                                            }
                                        ],
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "401": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "No autenticado"
                    }
                }
            },
            "post": {
                "operationId": "nodes_create",
                "description": "\nCrea un nuevo nodo en el árbol.\n\n**Permisos requeridos:** Rol ADMIN o SUDO\n",
                "summary": "Crear nuevo nodo",
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            },
                            "examples": {
                                "EjemploDeNodoRaíz": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "one",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "two",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": []
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo raíz",
                                    "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                },
                                "EjemploDeNodoConProfundidad2": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "uno",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "dos",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": [
                                                    {
                                                        "id": 3,
                                                        "content": "Nieto",
                                                        "title": "tres",
                                                        "parent": 2,
                                                        "created_at": "2024-01-15 10:07:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo con profundidad 2",
                                    "description": "Ejemplo con depth=2 (hasta nietos)"
                                },
                                "EjemploDeNodoHoja": {
                                    "value": {
                                        "id": 4,
                                        "content": "Nodo hoja",
                                        "title": "four",
                                        "parent": 2,
                                        "created_at": "2024-01-15 10:08:00",
                                        "children": []
                                    },
                                    "summary": "Ejemplo de nodo hoja",
                                    "description": "Ejemplo de nodo sin hijos"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "201": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "\nErrores de validación:\n- Content duplicado en mismo nivel\n- Auto-referencia\n"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    }
                }
            }
        },
        "/api/nodes/{id}/": {
            "get": {
                "operationId": "nodes_retrieve",
                "description": "Obtiene un nodo específico con sus descendientes según profundidad.",
                "summary": "Obtener nodo específico",
                "parameters": [
                    {
                        "in": "header",
                        "name": "Accept-Language",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Idioma para el campo title (ej: es, en, fr)"
                    },
                    {
                        "in": "header",
                        "name": "Time-Zone",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Zona horaria para created_at (ej: UTC, America/New_York)"
                    },
                    {
                        "in": "query",
                        "name": "depth",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Niveles de profundidad a mostrar"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "\nErrores de validación:\n- ID debe ser ≥ 1\n- ID inválido (no numérico)\n"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            },
            "put": {
                "operationId": "nodes_update",
                "description": "Actualiza todos los campos de un nodo existente.",
                "summary": "Actualizar nodo completo",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            },
                            "examples": {
                                "EjemploDeNodoRaíz": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "one",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "two",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": []
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo raíz",
                                    "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                },
                                "EjemploDeNodoConProfundidad2": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "uno",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "dos",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": [
                                                    {
                                                        "id": 3,
                                                        "content": "Nieto",
                                                        "title": "tres",
                                                        "parent": 2,
                                                        "created_at": "2024-01-15 10:07:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo con profundidad 2",
                                    "description": "Ejemplo con depth=2 (hasta nietos)"
                                },
                                "EjemploDeNodoHoja": {
                                    "value": {
                                        "id": 4,
                                        "content": "Nodo hoja",
                                        "title": "four",
                                        "parent": 2,
                                        "created_at": "2024-01-15 10:08:00",
                                        "children": []
                                    },
                                    "summary": "Ejemplo de nodo hoja",
                                    "description": "Ejemplo de nodo sin hijos"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Node"
                            }
                        }
                    },
                    "required": true
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Error de validación"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            },
            "patch": {
                "operationId": "nodes_partial_update",
                "description": "Actualiza campos específicos de un nodo existente.",
                "summary": "Actualizar nodo parcialmente",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            },
                            "examples": {
                                "EjemploDeNodoRaíz": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "one",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "two",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": []
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo raíz",
                                    "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                },
                                "EjemploDeNodoConProfundidad2": {
                                    "value": {
                                        "id": 1,
                                        "content": "Nodo raíz",
                                        "title": "uno",
                                        "parent": null,
                                        "created_at": "2024-01-15 10:00:00",
                                        "children": [
                                            {
                                                "id": 2,
                                                "content": "Hijo",
                                                "title": "dos",
                                                "parent": 1,
                                                "created_at": "2024-01-15 10:05:00",
                                                "children": [
                                                    {
                                                        "id": 3,
                                                        "content": "Nieto",
                                                        "title": "tres",
                                                        "parent": 2,
                                                        "created_at": "2024-01-15 10:07:00",
                                                        "children": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    "summary": "Ejemplo de nodo con profundidad 2",
                                    "description": "Ejemplo con depth=2 (hasta nietos)"
                                },
                                "EjemploDeNodoHoja": {
                                    "value": {
                                        "id": 4,
                                        "content": "Nodo hoja",
                                        "title": "four",
                                        "parent": 2,
                                        "created_at": "2024-01-15 10:08:00",
                                        "children": []
                                    },
                                    "summary": "Ejemplo de nodo hoja",
                                    "description": "Ejemplo de nodo sin hijos"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedNode"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Error de validación"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            },
            "delete": {
                "operationId": "nodes_destroy",
                "description": "\nElimina lógicamente un nodo.\n\n**Restricciones:**\n- No se puede eliminar nodos con hijos activos\n- Solo elimina nodos hoja\n- Es un borrado lógico (is_deleted=True)\n\n**Respuesta exitosa:** 200 OK con mensaje de confirmación\n**Error:** 400 Bad Request si tiene hijos activos\n",
                "summary": "Eliminar nodo (soft delete)",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                },
                                "examples": {
                                    "EjemploRespuesta": {
                                        "value": {
                                            "message": "Nodo 5 eliminado exitosamente.",
                                            "id": 5
                                        },
                                        "summary": "Ejemplo respuesta"
                                    }
                                }
                            }
                        },
                        "description": "Eliminación exitosa"
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                },
                                "examples": {
                                    "Error:TieneHijos": {
                                        "value": {
                                            "error": "No se puede eliminar un nodo que tiene hijos activos.",
                                            "code": "has_children"
                                        },
                                        "summary": "Error: tiene hijos"
                                    }
                                }
                            }
                        },
                        "description": "\nErrores:\n- El nodo tiene hijos activos (code: has_children)\n- ID inválido (< 1 o no numérico)\n"
                    },
                    "403": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            }
        },
        "/api/nodes/{id}/descendants/": {
            "get": {
                "operationId": "nodes_descendants_retrieve",
                "description": "Obtiene todos los descendientes de un nodo específico.",
                "summary": "Obtener descendientes de un nodo",
                "parameters": [
                    {
                        "in": "query",
                        "name": "depth",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Niveles de profundidad a mostrar"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this Nodo.",
                        "required": true
                    }
                ],
                "tags": [
                    "nodes"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Node"
                                },
                                "examples": {
                                    "EjemploDeNodoRaíz": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "one",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "two",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": []
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo raíz",
                                        "description": "Ejemplo de nodo raíz con un hijo (depth=None o depth=1)"
                                    },
                                    "EjemploDeNodoConProfundidad2": {
                                        "value": {
                                            "id": 1,
                                            "content": "Nodo raíz",
                                            "title": "uno",
                                            "parent": null,
                                            "created_at": "2024-01-15 10:00:00",
                                            "children": [
                                                {
                                                    "id": 2,
                                                    "content": "Hijo",
                                                    "title": "dos",
                                                    "parent": 1,
                                                    "created_at": "2024-01-15 10:05:00",
                                                    "children": [
                                                        {
                                                            "id": 3,
                                                            "content": "Nieto",
                                                            "title": "tres",
                                                            "parent": 2,
                                                            "created_at": "2024-01-15 10:07:00",
                                                            "children": []
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "summary": "Ejemplo de nodo con profundidad 2",
                                        "description": "Ejemplo con depth=2 (hasta nietos)"
                                    },
                                    "EjemploDeNodoHoja": {
                                        "value": {
                                            "id": 4,
                                            "content": "Nodo hoja",
                                            "title": "four",
                                            "parent": 2,
                                            "created_at": "2024-01-15 10:08:00",
                                            "children": []
                                        },
                                        "summary": "Ejemplo de nodo hoja",
                                        "description": "Ejemplo de nodo sin hijos"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "ID inválido (< 1 o no numérico)"
                    },
                    "404": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {}
                                }
                            }
                        },
                        "description": "Nodo no encontrado"
                    }
                }
            }
        },
        "/api/token/": {
            "post": {
                "operationId": "token_create",
                "description": "Takes a set of user credentials and returns an access and refresh JSON web\ntoken pair to prove the authentication of those credentials.",
                "tags": [
                    "token"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenObtainPair"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TokenObtainPair"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/token/refresh/": {
            "post": {
                "operationId": "token_refresh_create",
                "description": "Takes a refresh type JSON web token and returns an access type JSON web\ntoken if the refresh token is valid.",
                "tags": [
                    "token"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/TokenRefresh"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TokenRefresh"
                                }
                            }
                        },
                        "description": ""
                    }
                }
            }
        },
        "/api/users/": {
            "get": {
                "operationId": "users_list",
                "description": "\n        Obtiene la lista de usuarios según los permisos del usuario autenticado.\n        \n        **Reglas de visibilidad por rol:**\n        - **SUDO**: Ve todos los usuarios (excepto eliminados)\n        - **ADMIN**: Ve todos los usuarios excepto SUDO\n        - **USER**: Solo ve su propio perfil\n        \n        **Características:**\n        - Filtros dinámicos por rol, estado de confirmación y actividad\n        - Búsqueda en username, email, nombre y apellido\n        - Ordenamiento múltiple por diferentes campos\n        - Excluye automáticamente usuarios eliminados (soft delete)\n        \n        **Ejemplos de uso:**\n        - `GET /api/users/` - Lista según permisos\n        - `GET /api/users/?role=ADMIN` - Solo administradores\n        - `GET /api/users/?search=johndoe` - Buscar usuario\n        - `GET /api/users/?ordering=-date_joined` - Ordenar por fecha descendente\n        ",
                "summary": "Listar usuarios",
                "parameters": [
                    {
                        "in": "query",
                        "name": "is_active",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Filtrar por estado activo/inactivo (true/false)"
                    },
                    {
                        "in": "query",
                        "name": "is_deleted",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Filtrar por estado de eliminación lógica (true/false)"
                    },
                    {
                        "in": "query",
                        "name": "is_email_confirmed",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Filtrar por estado de confirmación de email (true/false)"
                    },
                    {
                        "in": "query",
                        "name": "ordering",
                        "schema": {
                            "type": "string"
                        },
                        "description": "\n                Campo(s) para ordenar resultados. Múltiples campos separados por coma.\n                Campos disponibles: username, email, date_joined, role, is_active\n                Prefijo '-' para orden descendente.\n                Ejemplo: `ordering=-date_joined,username`\n                "
                    },
                    {
                        "in": "query",
                        "name": "role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ADMIN",
                                "SUDO",
                                "USER"
                            ]
                        },
                        "description": "Filtrar por rol del usuario"
                    },
                    {
                        "in": "query",
                        "name": "search",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Buscar texto en: username, email, first_name, last_name, role"
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/User"
                                    }
                                },
                                "examples": {
                                    "ListadoParaSUDO": {
                                        "value": [
                                            [
                                                {
                                                    "id": 1,
                                                    "username": "superadmin",
                                                    "email": "admin@system.com",
                                                    "role": "SUDO",
                                                    "is_email_confirmed": true,
                                                    "is_active": true,
                                                    "is_deleted": false,
                                                    "date_joined": "2024-01-01T12:00:00Z"
                                                },
                                                {
                                                    "id": 2,
                                                    "username": "siteadmin",
                                                    "email": "admin@site.com",
                                                    "role": "ADMIN",
                                                    "is_email_confirmed": true,
                                                    "is_active": true,
                                                    "is_deleted": false,
                                                    "date_joined": "2024-01-02T10:00:00Z"
                                                }
                                            ]
                                        ],
                                        "summary": "Listado para SUDO",
                                        "description": "SUDO ve todos los usuarios incluyendo otros SUDO"
                                    },
                                    "ListadoParaADMIN": {
                                        "value": [
                                            [
                                                {
                                                    "id": 2,
                                                    "username": "siteadmin",
                                                    "email": "admin@site.com",
                                                    "role": "ADMIN",
                                                    "is_email_confirmed": true,
                                                    "is_active": true,
                                                    "is_deleted": false,
                                                    "date_joined": "2024-01-02T10:00:00Z"
                                                },
                                                {
                                                    "id": 3,
                                                    "username": "johndoe",
                                                    "email": "john.doe@example.com",
                                                    "role": "USER",
                                                    "is_email_confirmed": true,
                                                    "is_active": true,
                                                    "is_deleted": false,
                                                    "date_joined": "2024-01-03T08:00:00Z"
                                                }
                                            ]
                                        ],
                                        "summary": "Listado para ADMIN",
                                        "description": "ADMIN ve todos los usuarios excepto SUDO"
                                    },
                                    "ListadoParaUSER": {
                                        "value": [
                                            [
                                                {
                                                    "id": 3,
                                                    "username": "johndoe",
                                                    "email": "john.doe@example.com",
                                                    "role": "USER",
                                                    "is_email_confirmed": true,
                                                    "is_active": true,
                                                    "is_deleted": false,
                                                    "date_joined": "2024-01-03T08:00:00Z"
                                                }
                                            ]
                                        ],
                                        "summary": "Listado para USER",
                                        "description": "USER solo ve su propio perfil"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "Permisos insuficientes"
                    }
                }
            }
        },
        "/api/users/{id}/": {
            "get": {
                "operationId": "users_retrieve",
                "description": "\n        Obtiene el detalle completo de un usuario específico.\n        \n        **Incluye métricas extendidas:**\n        - `nodes_created_count`: Número de nodos activos creados por el usuario\n        - `role_display`: Nombre completo del rol (para mostrar en UI)\n        \n        **Validaciones de acceso:**\n        - SUDO: Puede ver cualquier usuario\n        - ADMIN: Puede ver cualquier usuario excepto SUDO\n        - USER: Solo puede verse a sí mismo\n        \n        **Usuarios eliminados:** No son accesibles a través de este endpoint\n        ",
                "summary": "Obtener detalle de usuario",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserDetail"
                                },
                                "examples": {
                                    "DetalleDeUsuarioADMIN": {
                                        "value": {
                                            "id": 2,
                                            "username": "siteadmin",
                                            "email": "admin@site.com",
                                            "first_name": "Site",
                                            "last_name": "Manager",
                                            "role": "ADMIN",
                                            "role_display": "Administrador",
                                            "is_email_confirmed": true,
                                            "is_active": true,
                                            "is_deleted": false,
                                            "date_joined": "2024-01-02T10:00:00Z",
                                            "last_login": "2024-01-14T14:20:00Z",
                                            "nodes_created_count": 5
                                        },
                                        "summary": "Detalle de usuario ADMIN"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "description": "Usuario no encontrado o eliminado"
                    }
                }
            },
            "patch": {
                "operationId": "users_partial_update",
                "description": "\n        Actualiza campos específicos de un usuario sin requerir todos los campos.\n        \n        **Mismas reglas y restricciones que PUT**, pero permite actualización parcial.\n        \n        **Ventajas:**\n        - Solo enviar campos a modificar\n        - Menor carga de datos\n        - Ideal para actualizaciones específicas\n        \n        **Ejemplos comunes:**\n        - Actualizar first_name/last_name\n        - Cambiar email (con validación de unicidad)\n        - Actualizar contraseña\n        - Activar/desactivar cuenta (con restricciones)\n        ",
                "summary": "Actualizar parcialmente usuario (PATCH)",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "A unique integer value identifying this user.",
                        "required": true
                    }
                ],
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            },
                            "examples": {
                                "ActualizarNombre": {
                                    "value": {
                                        "first_name": "Updated",
                                        "last_name": "Name"
                                    },
                                    "summary": "Actualizar nombre",
                                    "description": "Actualización parcial de nombre"
                                },
                                "CambiarEmail": {
                                    "value": {
                                        "email": "new.email@example.com"
                                    },
                                    "summary": "Cambiar email",
                                    "description": "Cambio de email (debe ser único)"
                                },
                                "CambiarContraseña": {
                                    "value": {
                                        "password": "NewSecurePass789!"
                                    },
                                    "summary": "Cambiar contraseña",
                                    "description": "Actualización de contraseña (se hashea automáticamente)"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                },
                                "examples": {
                                    "ActualizarNombre": {
                                        "value": {
                                            "first_name": "Updated",
                                            "last_name": "Name"
                                        },
                                        "summary": "Actualizar nombre",
                                        "description": "Actualización parcial de nombre"
                                    },
                                    "CambiarEmail": {
                                        "value": {
                                            "email": "new.email@example.com"
                                        },
                                        "summary": "Cambiar email",
                                        "description": "Cambio de email (debe ser único)"
                                    },
                                    "CambiarContraseña": {
                                        "value": {
                                            "password": "NewSecurePass789!"
                                        },
                                        "summary": "Cambiar contraseña",
                                        "description": "Actualización de contraseña (se hashea automáticamente)"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "description": "Usuario eliminado o datos inválidos"
                    },
                    "403": {
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "description": "Usuario no encontrado"
                    }
                }
            }
        },
        "/api/users/{id}/nodes-created/": {
            "get": {
                "operationId": "users_nodes_created_list",
                "description": "\n        Obtiene la lista de nodos activos creados por un usuario específico.\n        \n        **Propósito:** Auditoría y seguimiento de actividad del usuario.\n        \n        **Permisos de acceso:**\n        - SUDO: Puede ver nodos de cualquier usuario\n        - ADMIN: Puede ver nodos de cualquier usuario (excepto SUDO)\n        - USER: Solo puede ver sus propios nodos\n        \n        **Características:**\n        - Solo incluye nodos activos (is_deleted=False)\n        - Incluye relaciones anidadas (parent, created_by, updated_by)\n        - Paginación automática\n        - Optimizado con select_related para mejor rendimiento\n        \n        **Requisito:** La aplicación 'nodes' debe estar instalada y disponible.\n        ",
                "summary": "Listar nodos creados por usuario",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "ID del usuario cuyos nodos se quieren listar",
                        "required": true
                    },
                    {
                        "in": "query",
                        "name": "is_active",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "in": "query",
                        "name": "is_deleted",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "in": "query",
                        "name": "is_email_confirmed",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "ordering",
                        "required": false,
                        "in": "query",
                        "description": "Which field to use when ordering the results.",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "query",
                        "name": "role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ADMIN",
                                "SUDO",
                                "USER"
                            ]
                        },
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    {
                        "name": "search",
                        "required": false,
                        "in": "query",
                        "description": "A search term.",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Node"
                                    }
                                },
                                "examples": {
                                    "RespuestaExitosa": {
                                        "value": [
                                            [
                                                {
                                                    "id": 1,
                                                    "title": "Nodo Principal",
                                                    "description": "Descripción del nodo",
                                                    "created_by": {
                                                        "id": 2,
                                                        "username": "siteadmin",
                                                        "email": "admin@site.com"
                                                    },
                                                    "created_at": "2024-01-10T09:30:00Z",
                                                    "is_deleted": false
                                                }
                                            ]
                                        ],
                                        "summary": "Respuesta exitosa"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "description": "Usuario eliminado o datos inválidos"
                    },
                    "403": {
                        "description": "Permisos insuficientes"
                    },
                    "404": {
                        "description": "Usuario no encontrado"
                    },
                    "503": {
                        "description": "Aplicación de nodos no disponible"
                    }
                }
            }
        },
        "/api/users/me/": {
            "get": {
                "operationId": "users_me_retrieve",
                "description": "\n        Retorna el perfil completo del usuario actualmente autenticado.\n        \n        **Propósito:** Auto-gestión y acceso rápido a información personal.\n        \n        **Características:**\n        - Incluye todos los datos del usuario\n        - Métricas extendidas: nodes_created_count (si aplica)\n        - Información de rol en formato legible (role_display)\n        - Validación de estado del usuario (no eliminado)\n        \n        **Respuestas especiales:**\n        - 410 GONE: Si el usuario ha sido eliminado (soft delete)\n        - 401 UNAUTHORIZED: Si no hay usuario autenticado\n        \n        **Ejemplo de uso:** Dashboard personal, configuración de perfil\n        ",
                "summary": "Obtener perfil del usuario autenticado",
                "tags": [
                    "users"
                ],
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserDetail"
                                },
                                "examples": {
                                    "PerfilDeUsuarioRegular": {
                                        "value": {
                                            "id": 3,
                                            "username": "johndoe",
                                            "email": "john.doe@example.com",
                                            "first_name": "John",
                                            "last_name": "Doe",
                                            "role": "USER",
                                            "role_display": "Usuario Regular",
                                            "is_email_confirmed": true,
                                            "is_active": true,
                                            "is_deleted": false,
                                            "date_joined": "2024-01-03T08:00:00Z",
                                            "last_login": "2024-01-13T16:45:00Z",
                                            "nodes_created_count": 12
                                        },
                                        "summary": "Perfil de usuario regular"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "410": {
                        "description": "Cuenta eliminada (soft delete)"
                    }
                }
            }
        },
        "/api/users/me/change-password/": {
            "post": {
                "operationId": "users_me_change_password_create",
                "description": "\n        Permite al usuario cambiar su propia contraseña de forma segura.\n        \n        **Proceso de validación:**\n        1. Verificar contraseña actual (old_password)\n        2. Validar que nueva contraseña coincida con confirmación\n        3. Verificar fortaleza de nueva contraseña (mínimo 8 caracteres)\n        4. Actualizar contraseña en base de datos (hash automático)\n        \n        **Requisitos de contraseña:**\n        - Mínimo 8 caracteres\n        - Se recomienda usar mayúsculas, minúsculas, números y símbolos\n        - No se almacena en texto plano (siempre hasheada)\n        \n        **Consideraciones de seguridad:**\n        - Usuario debe estar autenticado\n        - Usuario no debe estar eliminado\n        - Después del cambio, tokens JWT existentes siguen válidos hasta expiración\n        - Para invalidar todas las sesiones, se requiere logout manual\n        \n        **Respuestas de error específicas:**\n        - 400: Contraseña actual incorrecta o no coinciden\n        - 401: No autenticado\n        - 410: Cuenta eliminada\n        ",
                "summary": "Cambiar contraseña propia",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "old_password",
                                    "new_password",
                                    "confirm_password"
                                ],
                                "properties": {
                                    "old_password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "Contraseña actual del usuario",
                                        "minLength": 1
                                    },
                                    "new_password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "Nueva contraseña (mínimo 8 caracteres)",
                                        "minLength": 8
                                    },
                                    "confirm_password": {
                                        "type": "string",
                                        "format": "password",
                                        "description": "Confirmación de nueva contraseña",
                                        "minLength": 8
                                    }
                                },
                                "example": {
                                    "old_password": "CurrentPass123",
                                    "new_password": "NewSecurePass456!",
                                    "confirm_password": "NewSecurePass456!"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Contraseña actualizada correctamente"
                    },
                    "400": {
                        "description": "Error de validación"
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "410": {
                        "description": "Cuenta eliminada"
                    }
                }
            }
        },
        "/api/users/me/update/": {
            "put": {
                "operationId": "users_me_update_update",
                "description": "\n        Permite al usuario autenticado actualizar su propio perfil.\n        \n        **Características:**\n        - Métodos PUT (actualización completa) y PATCH (parcial)\n        - Mismas validaciones que actualización normal\n        - Restricciones adicionales para auto-gestión\n        \n        **Restricciones específicas:**\n        1. USER no puede cambiar su propio rol\n        2. No se puede desactivar la propia cuenta\n        3. Validación de email único (excluyéndose a sí mismo)\n        4. Usuario no debe estar eliminado\n        \n        **Campos comúnmente actualizados:**\n        - first_name, last_name\n        - email (con validación de unicidad)\n        - password (si se proporciona, se hashea automáticamente)\n        \n        **No se puede modificar:**\n        - username (requeriría flujo especial)\n        - role (excepto por ADMIN/SUDO)\n        - is_active (para desactivar cuenta propia)\n        - is_deleted (solo mediante soft delete)\n        ",
                "summary": "Actualizar perfil propio",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            },
                            "examples": {
                                "ActualizaciónParcial(PATCH)": {
                                    "value": {
                                        "first_name": "Jonathan",
                                        "last_name": "Smith",
                                        "email": "jonathan.smith@example.com"
                                    },
                                    "summary": "Actualización parcial (PATCH)",
                                    "description": "Cambio de nombre y email"
                                },
                                "ActualizaciónCompleta(PUT)": {
                                    "value": {
                                        "first_name": "Jonathan",
                                        "last_name": "Smith",
                                        "email": "jonathan.smith@example.com",
                                        "password": "NewSecurePass123!"
                                    },
                                    "summary": "Actualización completa (PUT)",
                                    "description": "Cambio completo incluyendo contraseña"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/User"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                },
                                "examples": {
                                    "ActualizaciónParcial(PATCH)": {
                                        "value": {
                                            "first_name": "Jonathan",
                                            "last_name": "Smith",
                                            "email": "jonathan.smith@example.com"
                                        },
                                        "summary": "Actualización parcial (PATCH)",
                                        "description": "Cambio de nombre y email"
                                    },
                                    "ActualizaciónCompleta(PUT)": {
                                        "value": {
                                            "first_name": "Jonathan",
                                            "last_name": "Smith",
                                            "email": "jonathan.smith@example.com",
                                            "password": "NewSecurePass123!"
                                        },
                                        "summary": "Actualización completa (PUT)",
                                        "description": "Cambio completo incluyendo contraseña"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "description": "Datos inválidos"
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "Restricción de auto-gestión"
                    },
                    "410": {
                        "description": "Cuenta eliminada"
                    }
                }
            },
            "patch": {
                "operationId": "users_me_update_partial_update",
                "description": "\n        Permite al usuario autenticado actualizar su propio perfil.\n        \n        **Características:**\n        - Métodos PUT (actualización completa) y PATCH (parcial)\n        - Mismas validaciones que actualización normal\n        - Restricciones adicionales para auto-gestión\n        \n        **Restricciones específicas:**\n        1. USER no puede cambiar su propio rol\n        2. No se puede desactivar la propia cuenta\n        3. Validación de email único (excluyéndose a sí mismo)\n        4. Usuario no debe estar eliminado\n        \n        **Campos comúnmente actualizados:**\n        - first_name, last_name\n        - email (con validación de unicidad)\n        - password (si se proporciona, se hashea automáticamente)\n        \n        **No se puede modificar:**\n        - username (requeriría flujo especial)\n        - role (excepto por ADMIN/SUDO)\n        - is_active (para desactivar cuenta propia)\n        - is_deleted (solo mediante soft delete)\n        ",
                "summary": "Actualizar perfil propio",
                "tags": [
                    "users"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            },
                            "examples": {
                                "ActualizaciónParcial(PATCH)": {
                                    "value": {
                                        "first_name": "Jonathan",
                                        "last_name": "Smith",
                                        "email": "jonathan.smith@example.com"
                                    },
                                    "summary": "Actualización parcial (PATCH)",
                                    "description": "Cambio de nombre y email"
                                },
                                "ActualizaciónCompleta(PUT)": {
                                    "value": {
                                        "first_name": "Jonathan",
                                        "last_name": "Smith",
                                        "email": "jonathan.smith@example.com",
                                        "password": "NewSecurePass123!"
                                    },
                                    "summary": "Actualización completa (PUT)",
                                    "description": "Cambio completo incluyendo contraseña"
                                }
                            }
                        },
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        },
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchedUser"
                            }
                        }
                    }
                },
                "security": [
                    {
                        "jwtAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                },
                                "examples": {
                                    "ActualizaciónParcial(PATCH)": {
                                        "value": {
                                            "first_name": "Jonathan",
                                            "last_name": "Smith",
                                            "email": "jonathan.smith@example.com"
                                        },
                                        "summary": "Actualización parcial (PATCH)",
                                        "description": "Cambio de nombre y email"
                                    },
                                    "ActualizaciónCompleta(PUT)": {
                                        "value": {
                                            "first_name": "Jonathan",
                                            "last_name": "Smith",
                                            "email": "jonathan.smith@example.com",
                                            "password": "NewSecurePass123!"
                                        },
                                        "summary": "Actualización completa (PUT)",
                                        "description": "Cambio completo incluyendo contraseña"
                                    }
                                }
                            }
                        },
                        "description": ""
                    },
                    "400": {
                        "description": "Datos inválidos"
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "Restricción de auto-gestión"
                    },
                    "410": {
                        "description": "Cuenta eliminada"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Node": {
                "type": "object",
                "description": "Serializador para el modelo Node con características avanzadas:\n\n**Campos calculados dinámicamente:**\n1. **title**: Representación textual del ID según idioma del header Accept-Language\n   - Ejemplo: ID=1 → \"one\" (en), \"uno\" (es), \"un\" (fr)\n   - Idiomas soportados: en, es, fr, de, it, pt, ru, ar\n   - Fallback a inglés si idioma no soportado\n\n2. **children**: Lista de hijos con control de profundidad recursiva\n   - Controlado por parámetro de query ?depth=N\n   - Lógica de profundidad:\n     - depth=None: solo hijos directos (default)\n     - depth=0: sin hijos\n     - depth=1: hijos directos (sin nietos)\n     - depth=2: hijos + nietos\n     - depth=-1: todos los niveles (limitado a 10 por seguridad)\n\n3. **created_at**: Fecha de creación en zona horaria personalizada\n   - Se ajusta según header Time-Zone\n   - Formato: \"YYYY-MM-DD HH:MM:SS\"\n   - Fallback a UTC si zona horaria inválida\n\n**Validaciones implementadas:**\n- Unicidad: No puede haber dos nodos con mismo content bajo mismo parent\n- Auto-referencia: Un nodo no puede ser su propio padre\n- ID validation: IDs deben ser ≥ 1 (solo lectura, generado automáticamente)",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "content": {
                        "type": "string",
                        "description": "Contenido o descripción del nodo.",
                        "maxLength": 255
                    },
                    "title": {
                        "type": "string",
                        "readOnly": true
                    },
                    "parent": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Nodo padre. Null si es un nodo raíz."
                    },
                    "children": {
                        "type": "string",
                        "readOnly": true
                    },
                    "created_at": {
                        "type": "string",
                        "readOnly": true
                    }
                },
                "required": [
                    "children",
                    "content",
                    "created_at",
                    "id",
                    "title"
                ]
            },
            "PatchedNode": {
                "type": "object",
                "description": "Serializador para el modelo Node con características avanzadas:\n\n**Campos calculados dinámicamente:**\n1. **title**: Representación textual del ID según idioma del header Accept-Language\n   - Ejemplo: ID=1 → \"one\" (en), \"uno\" (es), \"un\" (fr)\n   - Idiomas soportados: en, es, fr, de, it, pt, ru, ar\n   - Fallback a inglés si idioma no soportado\n\n2. **children**: Lista de hijos con control de profundidad recursiva\n   - Controlado por parámetro de query ?depth=N\n   - Lógica de profundidad:\n     - depth=None: solo hijos directos (default)\n     - depth=0: sin hijos\n     - depth=1: hijos directos (sin nietos)\n     - depth=2: hijos + nietos\n     - depth=-1: todos los niveles (limitado a 10 por seguridad)\n\n3. **created_at**: Fecha de creación en zona horaria personalizada\n   - Se ajusta según header Time-Zone\n   - Formato: \"YYYY-MM-DD HH:MM:SS\"\n   - Fallback a UTC si zona horaria inválida\n\n**Validaciones implementadas:**\n- Unicidad: No puede haber dos nodos con mismo content bajo mismo parent\n- Auto-referencia: Un nodo no puede ser su propio padre\n- ID validation: IDs deben ser ≥ 1 (solo lectura, generado automáticamente)",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "content": {
                        "type": "string",
                        "description": "Contenido o descripción del nodo.",
                        "maxLength": 255
                    },
                    "title": {
                        "type": "string",
                        "readOnly": true
                    },
                    "parent": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Nodo padre. Null si es un nodo raíz."
                    },
                    "children": {
                        "type": "string",
                        "readOnly": true
                    },
                    "created_at": {
                        "type": "string",
                        "readOnly": true
                    }
                }
            },
            "PatchedUser": {
                "type": "object",
                "description": "Serializer base para operaciones de lectura (GET) y actualización (PUT/PATCH).",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Dejar en blanco para mantener la contraseña actual. Mínimo 8 caracteres.",
                        "minLength": 8
                    },
                    "is_deleted": {
                        "type": "boolean",
                        "readOnly": true,
                        "description": "Indica si el usuario ha sido eliminado lógicamente."
                    }
                }
            },
            "RoleEnum": {
                "enum": [
                    "SUDO",
                    "ADMIN",
                    "USER"
                ],
                "type": "string",
                "description": "* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
            },
            "TokenObtainPair": {
                "type": "object",
                "properties": {
                    "username": {
                        "type": "string",
                        "writeOnly": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true
                    },
                    "access": {
                        "type": "string",
                        "readOnly": true
                    },
                    "refresh": {
                        "type": "string",
                        "readOnly": true
                    }
                },
                "required": [
                    "access",
                    "password",
                    "refresh",
                    "username"
                ]
            },
            "TokenRefresh": {
                "type": "object",
                "properties": {
                    "access": {
                        "type": "string",
                        "readOnly": true
                    },
                    "refresh": {
                        "type": "string",
                        "writeOnly": true
                    }
                },
                "required": [
                    "access",
                    "refresh"
                ]
            },
            "User": {
                "type": "object",
                "description": "Serializer base para operaciones de lectura (GET) y actualización (PUT/PATCH).",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Dejar en blanco para mantener la contraseña actual. Mínimo 8 caracteres.",
                        "minLength": 8
                    },
                    "is_deleted": {
                        "type": "boolean",
                        "readOnly": true,
                        "description": "Indica si el usuario ha sido eliminado lógicamente."
                    }
                },
                "required": [
                    "date_joined",
                    "id",
                    "is_deleted",
                    "is_staff",
                    "is_superuser",
                    "last_login"
                ]
            },
            "UserDetail": {
                "type": "object",
                "description": "Serializer extendido para la vista de detalle.",
                "properties": {
                    "id": {
                        "type": "integer",
                        "readOnly": true
                    },
                    "username": {
                        "type": "string",
                        "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        "pattern": "^[\\w.@+-]+$",
                        "maxLength": 150
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "description": "Correo electrónico único del usuario.",
                        "maxLength": 254
                    },
                    "first_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "last_name": {
                        "type": "string",
                        "maxLength": 150
                    },
                    "role": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/RoleEnum"
                            }
                        ],
                        "description": "Rol de acceso del usuario (SUDO, ADMIN, USER).\n\n* `SUDO` - Super User Ops\n* `ADMIN` - Administrador\n* `USER` - Usuario Regular"
                    },
                    "is_email_confirmed": {
                        "type": "boolean",
                        "description": "Indica si el usuario ha verificado su correo electrónico."
                    },
                    "is_active": {
                        "type": "boolean",
                        "title": "Active",
                        "description": "Designates whether this user should be treated as active. Unselect this instead of deleting accounts."
                    },
                    "is_staff": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Staff status",
                        "description": "Designates whether the user can log into this admin site."
                    },
                    "is_superuser": {
                        "type": "boolean",
                        "readOnly": true,
                        "title": "Superuser status",
                        "description": "Designates that this user has all permissions without explicitly assigning them."
                    },
                    "date_joined": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                    },
                    "last_login": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "nullable": true
                    },
                    "password": {
                        "type": "string",
                        "writeOnly": true,
                        "description": "Dejar en blanco para mantener la contraseña actual. Mínimo 8 caracteres.",
                        "minLength": 8
                    },
                    "is_deleted": {
                        "type": "boolean",
                        "readOnly": true,
                        "description": "Indica si el usuario ha sido eliminado lógicamente."
                    },
                    "nodes_created_count": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Cantidad de nodos activos creados por este usuario."
                    },
                    "role_display": {
                        "type": "string",
                        "readOnly": true,
                        "description": "Nombre completo del rol."
                    }
                },
                "required": [
                    "date_joined",
                    "id",
                    "is_deleted",
                    "is_staff",
                    "is_superuser",
                    "last_login",
                    "nodes_created_count",
                    "role_display"
                ]
            }
        },
        "securitySchemes": {
            "jwtAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}